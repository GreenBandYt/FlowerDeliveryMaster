{% extends "base.html" %}

{% block title %}Просмотр аналитики{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 style="color: #4B515D;">Просмотр аналитики</h1>
    <div class="row mb-4">
        <div class="col-md-3">
            <a href="{% url 'admin_zone:home' %}" class="btn" style="background-color: #28a745; color: white; width: 100%;">Главная</a>
        </div>
        <div class="col-md-3">
            <a href="{% url 'admin_zone:orders' %}" class="btn" style="background-color: #28a745; color: white; width: 100%;">Управление заказами</a>
        </div>
        <div class="col-md-3">
            <a href="{% url 'admin_zone:reviews' %}" class="btn" style="background-color: #28a745; color: white; width: 100%;">Управление отзывами</a>
        </div>
        <div class="col-md-3">
            <a href="{% url 'admin_zone:analytics' %}" class="btn" style="background-color: #28a745; color: white; width: 100%;">Просмотр аналитики</a>
        </div>
    </div>

    <!-- Подпись о периоде -->
    <h3 class="mt-4" style="color: #4B515D;">Данные за весь период</h3>
    <div class="row">
        <!-- Карточка Пользователи -->
        <div class="col-md-3">
            <div class="card" style="background-color: #A3D8F4; color: white; margin-bottom: 15px; border-radius: 10px;">
                <div class="card-body">
                    <h5 class="card-title" style="font-weight: bold; color: #FF69B4;">Пользователи</h5>
                    <p class="card-text" style="font-size: 1.25rem; color: #4B515D;"><strong>{{ total_users }}</strong></p>
                </div>
            </div>
        </div>

        <!-- Карточка Всего заказов -->
        <div class="col-md-3">
            <div class="card" style="background-color: #A8E6A0; color: white; margin-bottom: 15px; border-radius: 10px;">
                <div class="card-body">
                    <h5 class="card-title" style="font-weight: bold; color: #FF69B4;">Всего заказов</h5>
                    <p class="card-text" style="font-size: 1.25rem; color: #4B515D;"><strong>{{ total_orders }}</strong></p>
                </div>
            </div>
        </div>

        <!-- Карточка Общий доход -->
        <div class="col-md-3">
            <div class="card" style="background-color: #FFF3A5; color: white; margin-bottom: 15px; border-radius: 10px;">
                <div class="card-body">
                    <h5 class="card-title" style="font-weight: bold; color: #FF69B4;">Общий доход</h5>
                    <p class="card-text" style="font-size: 1.25rem; color: #4B515D;"><strong>{{ total_revenue }} ₽</strong></p>
                </div>
            </div>
        </div>

        <!-- Карточка Средний чек -->
        <div class="col-md-3">
            <div class="card" style="background-color: #F4A6A6; color: white; margin-bottom: 15px; border-radius: 10px;">
                <div class="card-body">
                    <h5 class="card-title" style="font-weight: bold; color: #FF69B4;">Средний чек</h5>
                    <p class="card-text" style="font-size: 1.25rem; color: #4B515D;"><strong>{{ average_order_value }} ₽</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Таблица аналитики по периодам -->
    <h3 class="mt-5" style="color: #4B515D;">Аналитика по периодам</h3>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="thead-light">
                <tr>
                    <th>Период</th>
                    <th>Пользователи</th>
                    <th>Всего заказов</th>
                    <th>Общий доход</th>
                    <th>Средний чек</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Сегодня</td>
                    <td>{{ users_today }}</td>
                    <td>{{ orders_today }}</td>
                    <td>{{ revenue_today }} ₽</td>
                    <td>{{ average_today }} ₽</td>
                </tr>
                <tr>
                    <td>Последние 7 дней</td>
                    <td>{{ users_week }}</td>
                    <td>{{ orders_week }}</td>
                    <td>{{ revenue_week }} ₽</td>
                    <td>{{ average_week }} ₽</td>
                </tr>
                <tr>
                    <td>Текущий месяц</td>
                    <td>{{ users_month }}</td>
                    <td>{{ orders_month }}</td>
                    <td>{{ revenue_month }} ₽</td>
                    <td>{{ average_month }} ₽</td>
                </tr>
                <tr>
                    <td>Текущий год</td>
                    <td>{{ users_year }}</td>
                    <td>{{ orders_year }}</td>
                    <td>{{ revenue_year }} ₽</td>
                    <td>{{ average_year }} ₽</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
